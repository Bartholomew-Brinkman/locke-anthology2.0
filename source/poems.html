---
layout: poemLayout.njk
title: Poems
permalink: "poems.html"
---

<div id="authorButtons">
    {% for author in authors %}
    <button onclick="filterPoems('{{ author.original }}')">{{ author.withSpaces }}</button>
    {% endfor %}
</div>

<div id="archiveIframeContainer">
    <iframe id="archiveIframe" width="560" height="900" style="display:none;"></iframe>
</div>

<div id="poemCollection">
    {% for poem in poemAttributes %}
    <div class="poem" data-author="{{ poem.author }}">
        <iframe src="{{ poem.filePath }}"  width="100%" height="300px"></iframe>
    </div>
    </div>
    {% endfor %}
</div>

<script>
    function filterPoems(author) {
        console.log(`Filter Author Names`);
    }


    function filterPoems(authorName) {
        const poems = document.querySelectorAll('.poem');
        poems.forEach(poem => {
            if (poem.getAttribute('data-author') === authorName) {
                poem.style.display = 'block';
            } else {
                poem.style.display = 'none';
            }
        });
        const urlBeginning = "https://archive.org/details/newnegrointerpre00unse/page/";
        const urlEnd = "/mode/1up?view=theater";
        let minPage = null;

        poems.forEach(poem => {
            if (poem.getAttribute('data-author') === authorName) {
                poem.style.display = 'block';
            } else {
                poem.style.display = 'none';
            }
        });

        poemAttributes.forEach(poem => {
            if (poem.author === authorName && (minPage === null || poem.page < minPage)) {
                minPage = poem.page;
            }
        });

        if (minPage !== null) {
            const iframeUrl = `${urlBeginning}${minPage}${urlEnd}`;
            document.getElementById('archiveIframe').src = iframeUrl;
            document.getElementById('archiveIframe').style.display = 'block';
        } else {
            document.getElementById('archiveIframe').style.display = 'none';
        }

    }


</script>
